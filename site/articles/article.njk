---
layout: layouts/base.njk
pagination:
  data: collections.articles
  size: 1
  alias: article
permalink: "articles/{{ article.slug }}/"
eleventyComputed:
  title: "{{ article.data.title }}"
  description: "{{ article.data.excerpt | safe }}"
---
{% from "components/author-byline.njk" import authorByline %}
{% from "components/tag-list.njk" import tagList %}
{% from "components/bookmark-button.njk" import bookmarkButton %}
{% set author = collections.authors | selectattr('data.handle', 'equalto', article.data['author-handle']) | first %}
{% set publication = collections.publications | selectattr('data.slug', 'equalto', article.data.publication) | first %}
{% set shareText = (article.data.excerpt or article.data.title) | striptags %}
{% set bookmarkPayload = {
  id: article.slug,
  title: article.data.title,
  url: article.data.url,
  excerpt: article.data.excerpt,
  author: author.data.name or author.id,
  tags: article.data.tags
} %}
<article class="article-reader">
  <header class="article-reader__header">
    <p class="article-reader__meta">
      <span>{{ article.data['date-published'] | readableDate('en-US') }}</span>
      <span>‚Ä¢ {{ article.data['reading-meta'].text }}</span>
      <span>‚Ä¢ v{{ article.data.version }}</span>
    </p>
    <h1 class="article-reader__title">{{ article.data.title }}</h1>
    <div class="article-reader__actions">
      {{ bookmarkButton(bookmarkPayload, { context: 'article' }) | safe }}
      <div class="article-share" data-share-container>
        <button
          type="button"
          class="icon-button"
          data-share-button="copy"
          data-share-url="{{ article.data.url }}"
          data-share-title="{{ article.data.title }}"
          data-share-text="{{ shareText }}"
        >
          <span aria-hidden="true">‚ßâ</span>
          <span>Copy link</span>
        </button>
        <button
          type="button"
          class="icon-button"
          data-share-button="twitter"
          data-share-url="{{ article.data.url }}"
          data-share-title="{{ article.data.title }}"
          data-share-text="{{ shareText }}"
        >
          <span aria-hidden="true">ùïè</span>
          <span>Tweet</span>
        </button>
        <button
          type="button"
          class="icon-button"
          data-share-button="linkedin"
          data-share-url="{{ article.data.url }}"
          data-share-title="{{ article.data.title }}"
          data-share-text="{{ shareText }}"
        >
          <span aria-hidden="true">in</span>
          <span>Share</span>
        </button>
        <button
          type="button"
          class="icon-button"
          data-share-button="email"
          data-share-url="{{ article.data.url }}"
          data-share-title="{{ article.data.title }}"
          data-share-text="{{ shareText }}"
        >
          <span aria-hidden="true">‚úâ</span>
          <span>Email</span>
        </button>
      </div>
    </div>
    {{ authorByline(author, publication) | safe }}
    {% if article.data['cover-image'] %}
      <div class="article-reader__cover">
        {% coverImage article.data['cover-image'], {
          alt: article.data['cover-image-alt'] or article.data.title,
          caption: null,
          credit: article.data['cover-image-credit'],
          figure: false,
          class: 'article-reader__cover-image',
          fetchpriority: 'high'
        } %}
      </div>
    {% endif %}
    {{ tagList(article.data.tags) | safe }}
  </header>
  <div class="article-reader__content">
    {{ article.content | markdown | safe }}
  </div>
  <footer class="article-reader__footer">
    <p>Updated {{ article.data['updated-date'] | readableDate('en-US') }}.</p>
  </footer>
</article>
<div class="floating-actions is-hidden" data-floating-actions>
  <button
    type="button"
    class="bookmark-button bookmark-button--floating"
    data-bookmark-button
    data-bookmark-context="article"
    data-bookmark='{{ bookmarkPayload | dump | safe }}'
  >
    <span class="bookmark-button__icon" aria-hidden="true">‚òÖ</span>
    <span class="bookmark-button__label" data-bookmark-label>Save</span>
  </button>
  <button
    type="button"
    class="icon-button"
    data-share-button="copy"
    data-share-url="{{ article.data.url }}"
    data-share-title="{{ article.data.title }}"
    data-share-text="{{ shareText }}"
  >
    <span aria-hidden="true">‚ßâ</span>
  </button>
</div>
